(()=>{"use strict";var e={15:e=>{e.exports=require("react")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{HomeDashboard:()=>Je});var o=r(15),i=r.n(o);const a=require("pydio");var l=r.n(a);const c=require("material-ui"),s=require("material-ui/styles");var u=r(15),p=function(e){var t,r=e.pydio,n=e.pluginName,o=e.pluginParameter,i=e.style,a=e.darkMode,l=e.className,c=r.Registry.getPluginConfigs(n).get(o);return c||(c=r.Registry.getDefaultImageFromParameters(n,o)),c&&(0===c.indexOf("plug/")?(-1!==c.indexOf("[mode]")&&(c=c.replace("[mode]",a?"dark":"light")),t=c):t=r.Parameters.get("ENDPOINT_REST_API")+"/frontend/binaries/GLOBAL/"+c),u.createElement("img",{alt:"application logo",src:t,style:i,className:l})};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function y(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var v=l().requireLib("boot"),w=v.AsyncComponent,S=v.PydioContextConsumer,O=l().requireLib("workspaces"),x=O.ThemeTogglerCard,E=O.Scheme,P=function(e){var t=function(e){return React.createElement("div",{style:{position:"absolute",top:52,left:20,width:80,display:"flex",transformOrigin:"left",transform:"rotate("+-e+"deg)"}},React.createElement("span",{style:{flex:1}}),React.createElement("span",{className:"mdi mdi-dots-horizontal",style:{opacity:.5,marginRight:5}}),React.createElement("span",{style:{display:"inline-block",transform:"rotate("+e+"deg)"},className:"mdi mdi-account"}))};return React.createElement("div",null,React.createElement("p",null,e.message("workspaces.1")),React.createElement(E,{dimension:130},React.createElement("span",{style:{position:"absolute",top:52,left:20},className:"mdi mdi-network"}),t(30),t(0),t(-30)),React.createElement("p",null,e.message("workspaces.2")),React.createElement(E,{dimension:130},React.createElement("span",{className:"mdi mdi-account",style:{position:"absolute",left:54,top:32}}),React.createElement("div",{style:{position:"absolute",top:60,left:30}},React.createElement("span",{className:"mdi mdi-folder"}),React.createElement("span",{className:"mdi mdi-arrow-right"}),React.createElement("span",{className:"mdi mdi-network"}))))},j=function(e){return React.createElement("div",null,React.createElement("p",null,e.message("globsearch.1")),React.createElement(E,{style:{fontSize:10,padding:25},dimension:130},React.createElement("div",{style:{boxShadow:"2px 2px 0px #CFD8DC"}},React.createElement("div",{style:{backgroundColor:"#03a9f4",color:"white",borderRadius:"3px 3px 0 0"}},React.createElement("span",{className:"mdi mdi-magnify"}),e.message("infopanel.search"),"..."),React.createElement("div",{style:{backgroundColor:"white"}},React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"})," ",e.message("infopanel.folder")," 1 "),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-folder"}),"  ",e.message("infopanel.file")," 2"),React.createElement("div",null,React.createElement("span",{className:"mdi mdi-file"})," ",e.message("infopanel.file")," 3")))),React.createElement("p",null,e.message("globsearch.2")))},T=function(e){function t(e,r){var n,o,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=[e,r],i=b(i=t),n=y(o,h()?Reflect.construct(i,a||[],b(o).constructor):i.apply(o,a));var l=e.pydio.user;if(n.state={started:!1},!l)return y(n);var c=l.getLayoutPreference("UserAccount.WelcomeModal.Shown",!1);return n.state={started:c},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.pydio;this.state.started||setTimeout((function(){t.UI.openComponentInModal("UserAccount","WelcomeModal",{onRequestStart:function(t){t?e.discard(!0):(e.discard(!1),e.setState({started:!0}))}})}),500)}},{key:"discard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,r=t.pydio,n=t.onFinish,o=r.user;o.setLayoutPreference("UserAccount.WelcomeModal.Shown",!0),e&&(o.setLayoutPreference("WelcomeComponent.Pydio8.TourGuide.Welcome",!0),o.setLayoutPreference("WelcomeComponent.MUITour",!0),n&&n())}},{key:"render",value:function(){var e=this,t=this.props.pydio;if(!this.state.started||t.user&&t.user.getLayoutPreference("WelcomeComponent.MUITour"))return null;var r=this.props.getMessage,n=function(e){return r("ajax_gui.tour."+e)},o=[{title:n("theme.title"),text:React.createElement(x,{message:n}),selector:".mdi.mdi-theme-light-dark",position:"right-end"},{title:n("workspaces.title"),text:React.createElement(P,{message:n}),selector:".mdi-folder-multiple-outline",position:"right"},{title:n("globsearch.title"),text:React.createElement(j,{message:n}),selector:".home-search-form",position:"bottom"}];return React.createElement(w,{namespace:"PydioWorkspaces",componentName:"TourGuide",ref:"joyride",steps:o,run:!0,autoStart:!0,debug:!1,callback:function(t){"step:after"===t.type&&t.index===o.length-1&&e.discard(!0)},type:"continuous"})}}],n&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o.Component);T=S(T);const R=require("pydio/util/path");var k=r.n(R);const C=require("pydio/util/dom");var _=r.n(C);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return(t=I(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function I(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}var A=l().requireLib("components"),q=A.SimpleList,H=A.NodeListCustomProvider,U=l().requireLib("boot"),G=U.PydioContextConsumer,J=U.moment,V=l().requireLib("workspaces"),Y=V.UnifiedSearchForm,X=V.Facets,$=V.SearchSorter,K=V.FilePreview,Q=V.AdvancedChips,Z=V.SearchStatusButton,ee=l().requireLib("hoc").withSearch,te=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=B(t),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W()?Reflect.construct(t,r||[],B(e).constructor):t.apply(e,r))}(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this.props.onFocusChange;this._escListener=function(t){"Escape"===t.key&&e(!1)},document.addEventListener("keyup",this._escListener)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this._escListener)}},{key:"update",value:function(e){(0,this.props.searchTools.setValues)({basenameOrContent:e})}},{key:"render",value:function(){var e=this.props,t=e.searchTools,r=e.searchTools,n=r.facets,o=r.activeFacets,a=r.toggleFacet,l=r.loading,s=r.dataModel,u=r.empty,p=r.resultsCount,d=this.props,f=d.style,m=d.zDepth,y=d.pydio,h=d.fullScreen,b=d.fullScreenTransition,g=d.onFocusChange,v=d.muiTheme,w="mui3"===v.userTheme,S=v.palette.mui3,O="rgba(0,0,0,.53)",x={mainContainer:{position:"absolute",top:h?0:199,left:w?74:0,right:0,bottom:0,transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",display:"flex",flexDirection:"column",alignItems:"center"},searchContainer:{width:"100%",zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",background:w&&h?S["surface-1"]:"transparent",padding:h?w?"10px 50px 10px 10px":"10px 50px":0},textFieldContainer:{width:"100%",maxWidth:h?1e4:700,display:"flex",alignItems:"center",background:w?S["surface-variant"]:"#eceff1",height:h?40:50,padding:"2px 4px",borderRadius:50,marginTop:h?0:-25},textField:{flex:1},textInput:{color:"inherit"},textHint:{color:O,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},magnifier:{color:O,fontSize:20,padding:"14px 8px"},close:{position:"absolute",right:2,top:6,zIndex:2},searchForm:{mainStyle:{backgroundColor:"transparent",height:48,border:0},completeMenuStyle:{width:"100%"},inputStyle:{fontSize:18},hintStyle:{fontSize:18},magnifierStyle:{fontSize:20,marginRight:10},filterButton:{color:v.palette.primary1Color,fontSize:22,width:28,height:28,padding:3},filterButtonActive:{}},facets:{container:{width:230,overflowY:"auto",background:S["surface-2"],color:w?S["on-surface-variant"]:"#5c7784",borderRadius:0,borderRight:w?"1px solid "+S["outline-variant-50"]:void 0,paddingLeft:16,paddingRight:16,paddingTop:10},header:{fontWeight:500,padding:"10px 0",fontSize:15},subHeader:{fontWeight:500,textTransform:"uppercase",padding:"12px 0"}}},E={iconClassName:"",primaryTextId:l?"searchengine.searching":478,style:{backgroundColor:"transparent"}};u&&(E.primaryTextId="searchengine.start");var P={display:"block",flex:1,overflowY:"hidden",width:680,maxWidth:"98%"};h&&(P.display="none");var j={fixed:{borderRadius:20,display:"flex",alignItems:"center",justifyContent:"center"},label:{fontSize:"inherit",paddingLeft:10,paddingRight:10},button:{width:"auto",height:24,lineHeight:"20px",margin:0,marginBottom:5,backgroundColor:"var(--md-sys-color-surface-variant)"}};return i().createElement(c.Paper,{style:f,zDepth:m,className:"vertical-layout home-center-paper",rounded:!1},i().createElement("div",{style:x.mainContainer},i().createElement(c.Paper,{zDepth:h?1:0,rounded:!1,style:x.searchContainer},i().createElement(c.Paper,{zDepth:0,style:x.textFieldContainer,className:"home-search-form"},i().createElement(Y,{style:{flex:1},active:h,preventOpen:b,pydio:y,formStyles:x.searchForm,searchTools:t,onRequestOpen:function(){return g(!0)},onRequestClose:function(){return g(!1)}}),l&&i().createElement("div",{style:{marginTop:14,marginRight:8}},i().createElement(c.CircularProgress,{size:20,thickness:2}))),h&&i().createElement(Q,{appendUnstyled:i().createElement(Z,{pydio:y,searchTools:t,moreOnly:!0,style:L(L(L({},j.button),j.label),j.fixed),buttonStyle:j.button,buttonLabelStyle:j.label}),searchTools:t,containerStyle:{width:"100%",paddingTop:11,marginBottom:-4}})),h&&i().createElement("div",{className:"layout-fill",style:{width:"100%",display:"flex"}},_().getViewportWidth()>758&&i().createElement(X,{pydio:y,facets:n,activeFacets:o,onToggleFacet:a,emptyStateView:i().createElement("div",{style:{fontWeight:500,padding:"10px 0px",fontSize:15}}),styles:x.facets,zDepth:w?0:void 0,topPane:!u&&p>0&&i().createElement($,{searchTools:t})}),i().createElement(H,{containerStyle:{flex:1,marginLeft:10},className:"files-list vertical_fit",elementHeight:q.HEIGHT_TWO_LINES,entryRenderIcon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i().createElement(K,{loadThumbnail:!t.parentIsScrolling,node:e})},entryRenderActions:function(){return null},entryRenderSecondLine:function(e){var t=e.getPath(),r=e.getMetadata(),n=new Date;n.setTime(1e3*parseInt(r.get("ajxp_modiftime")));var o,a,l=J(n).fromNow();return parseInt(e.getMetadata().get("bytesize"))&&(o=k().roundFileSize(parseInt(e.getMetadata().get("bytesize")))),k().getDirname(t)&&(a=y.MessageHash["user_home.search.result.location"]+": "+k().getDirname(t)||"/"),i().createElement("div",null,l," ",o?i().createElement("span",null,"• ",o):""," ",a?i().createElement("span",null,"• ",a):null)},entryRenderGroupHeader:function(e,t){return i().createElement("div",{style:{fontSize:13,color:"#93a8b2",fontWeight:500,cursor:"pointer"},onClick:function(){return y.triggerRepositoryChange(e)}},t)},presetDataModel:s,presetRootNode:s.getSearchNode(),openCollection:function(e){y.goTo(e)},nodeClicked:function(e){y.goTo(e)},defaultGroupBy:"repository_id",groupByLabel:"repository_display",emptyStateProps:E})),i().createElement("div",{style:P,id:"history-block"},this.props.children)),h&&i().createElement(c.IconButton,{iconClassName:"mdi mdi-close",style:x.close,onClick:function(){return g(!1)},tooltipPosition:"bottom-left",tooltip:y.MessageHash[86]}))}}],n&&z(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o.Component);te=G(te=ee(te,"main","all")),te=(0,s.muiThemeable)()(te);const re=require("pydio/model/meta-node-provider");var ne=r.n(re);const oe=require("pydio/http/api");var ie=r.n(oe);const ae=require("cells-sdk");function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return(t=we(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t,r){return t=fe(t),function(e,t){if(t&&("object"==he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,de()?Reflect.construct(t,r||[],fe(e).constructor):t.apply(e,r))}function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,we(n.key),n)}}function ve(e,t,r){return t&&ge(e.prototype,t),r&&ge(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function we(e){var t=function(e){if("object"!=he(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}var Se=l().requireLib("boot"),Oe=Se.PydioContextConsumer,xe=Se.moment,Ee=Se.M3Tooltip,Pe=l().requireLib("workspaces").FilePreview,je=l().requireLib("hoc"),Te=je.PlaceHolder,Re=je.PhTextRow,ke=je.PhRoundShape,Ce=function(){return ve((function e(t,r){be(this,e),this.pydio=t,this.stater=r}),[{key:"m",value:function(e){return this.pydio.MessageHash["user_home.reco."+e]||e}},{key:"load",value:function(){var e=this,t=new ae.GraphServiceApi(ie().getRestClient()),r=new ae.RestRecommendRequest;return r.Limit=8,t.recommend(r).then((function(t){return(t.Nodes||[]).map((function(t){var r;if(t.AppearsIn?r=t.AppearsIn[0].WsSlug:t.MetaStore.ws_slug&&(r=JSON.parse(t.MetaStore.ws_slug)),t.MetaStore["reco-annotation"]){var n=JSON.parse(t.MetaStore["reco-annotation"]);if(0===n.indexOf("activity:")){var o=n.replace("activity:","");t.MetaStore.card_legend=JSON.stringify(xe(1e3*o).fromNow())}else"bookmark"===n?t.MetaStore.card_legend=JSON.stringify(e.m("bookmark")):"workspace"===n&&('"ROOM"'===t.MetaStore.ws_scope?(t.MetaStore.card_legend=JSON.stringify(e.m("cell")),t.MetaStore.fonticon=JSON.stringify("icomoon-cells")):t.MetaStore.card_legend=JSON.stringify(e.m("workspace")))}return ne().parseTreeNode(t,r)}))}))}}])}(),_e=function(e){function t(e){var r;return be(this,t),(r=pe(this,t,[e])).state={opacity:0},r}return me(t,e),ve(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({opacity:1})}),200)}},{key:"render",value:function(){var e=this,t=this.state,r=t.opacity,n=t.hover,o=this.props.legend,a=this.props,l=a.title,s=a.node,u=a.pydio,p=a.muiTheme,d=a.last,f=a.display,m=void 0===f?"list":f,y={paper:{width:140,height:160,margin:10,padding:6,borderRadius:6,boxShadow:n?"0px 15px 30px -6px rgba(0, 0, 0, .15)":"-1px 0px 15px 0px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",cursor:"pointer",alignItems:"center",textAlign:"center",opacity:r,transition:"all 250ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},preview:{boxShadow:"0 0 0 1px #edf0f2",borderRadius:6,width:"100%",flex:1,alignItems:"center",justifyContent:"center",display:"flex"},mimeFontStyle:{fontSize:40},fontOverlay:{position:"absolute",bottom:0,right:5},label:{fontSize:14,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},title:{fontSize:14,marginTop:10},legend:{fontSize:11,fontWeight:500,color:"#9E9E9E"},interDiv:{width:"100%",overflow:"hidden"}};if("mui3"===p.userTheme){var h=p.palette.mui3;if(y.paper=se(se({},y.paper),{},{width:160,height:190,borderRadius:12,boxShadow:null,margin:4,padding:0,paddingBottom:6,background:h.surface,color:h["on-surface"]}),y.preview=se(se({},y.preview),{},{borderRadius:12,boxShadow:null}),y.label=se(se({},y.label),{},{paddingLeft:10,textAlign:"left"}),y.title.fontWeight=500,y.legend.color=h["on-surface-variant"],y.legend.fontWeight=400,"list"===m&&(y.paper=se(se({},y.paper),{},{background:n?"var(--md-sys-color-hover-background)":"none",border:0,margin:0,borderBottom:d?"none":"1px solid rgba(0,0,0,.05)",borderRadius:0,width:"100%",height:74,flexDirection:"row",padding:"0 16px",paddingBottom:0}),y.preview={borderRadius:6,width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center"},y.interDiv={flex:1,overflow:"hidden",paddingLeft:8},y.mimeFontStyle={fontSize:20},y.title.marginTop=0,y.title.fontSize=15,y.legend.fontSize=12,s.getMetadata().has("reco-annotation")&&(0===s.getMetadata().get("reco-annotation").indexOf("activity:")||"bookmark"===s.getMetadata().get("reco-annotation")))){var b=s.getMetadata().get("repository_id"),g=u.user.getRepositoriesList().get(b).getLabel(),v=k().getDirname(s.getPath());"/"!==v&&v?v+=" - ":v="",o="["+g+"] "+v+o}}return i().createElement(c.Paper,{zDepth:0,style:y.paper,onClick:function(){u.goTo(s)},onMouseOver:function(){return e.setState({hover:!0})},onMouseOut:function(){return e.setState({hover:!1})},title:s&&s.getLabel()},s&&i().createElement(Pe,{node:s,style:y.preview,mimeFontStyle:y.mimeFontStyle,loadThumbnail:!0,mimeFontOverlay:!0,mimeFontOverlayStyle:y.fontOverlay}),i().createElement("div",{style:se({},y.interDiv)},i().createElement("div",{style:se(se({},y.label),y.title)},l),i().createElement("div",{style:se(se({},y.label),y.legend)},o)))}}])}(i().Component),De="Recents.List.Display",Me=function(e){function t(e){var r;be(this,t),r=pe(this,t,[e]);var n=e.pydio,o=e.muiTheme;r.loader=new Ce(n,r);var i=!1;return"mui3"===o.userTheme&&(i=n.user&&n.user.getWorkspacePreference(De,!1)),r.state={nodes:[],loading:!1,list:i},r}return me(t,e),ve(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.loader.load().then((function(t){e.setState({nodes:t,loading:!1})})).catch((function(t){console.error(t),e.setState({loading:!1})}))}},{key:"toggleList",value:function(){var e=this.props.pydio,t=!this.state.list;this.setState({list:t},(function(){e.user.setWorkspacePreference(De,t)}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.pydio,n=t.muiTheme,o=this.state,a=o.nodes,l=o.loading,c=o.list,s={display:l&&c?"block":"flex",padding:c?"4px 0":4,flexWrap:"wrap",justifyContent:"flex-start",maxWidth:680,width:"100%"},u={margin:10,width:140,height:160,padding:6,display:"flex",flexDirection:"column",alignItems:"center",borderRadius:6};"mui3"===n.userTheme&&(u.width=160,u.height=190,u.margin=4,u.borderRadius=12),c&&(u.width="100%",u.display="flex",u.flexDirection="row",u.height="auto");var p,d=i().createElement("div",{style:{display:"flex",flexWrap:"wrap"}},(p=Array(8).keys(),function(e){if(Array.isArray(e))return le(e)}(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(){return c?i().createElement("div",{style:u},i().createElement(ke,{style:ue(ue({width:"100%",height:40},"width",40),"borderRadius",u.borderRadius)}),i().createElement("div",{style:{flex:1,marginTop:-8,marginLeft:10}},i().createElement(Re,null),i().createElement(Re,null))):i().createElement("div",{style:u},i().createElement(ke,{style:{width:"100%",height:100,borderRadius:u.borderRadius}}),i().createElement(Re,null),i().createElement(Re,null))})));if(!r.user||r.user.lock)return i().createElement("div",null);var f={},m=[],y=0;return a.forEach((function(e){var t=e.getMetadata().get("uuid");f[t]||m.length>=8||(y++,f[t]=t,m.push(i().createElement(_e,{key:t,last:8===y,pydio:r,muiTheme:n,node:e,title:e.getLabel(),legend:e.getMetadata().get("card_legend"),display:c?"list":"thumb"})))})),i().createElement("div",{style:{maxHeight:"calc(100%  - 40px)",overflow:"hidden",display:"flex",flexDirection:"column",borderRadius:"var(--md-sys-color-paper-border-radius)",background:"var(--md-sys-color-surface-1)",marginTop:20}},i().createElement("div",{style:{display:"flex",padding:"16px 16px 6px",color:"var(--md-sys-color-secondary)",fontWeight:500}},i().createElement("div",{style:{flex:1}},r.MessageHash["user_home.87"]),"mui3"===n.userTheme&&i().createElement(Ee,{title:i().createElement("span",{style:{padding:"0 8px"}},r.MessageHash[c?"193":"192"])},i().createElement("span",{className:"mdi mdi-view-"+(c?"grid":"list"),onClick:function(){return e.toggleList()},style:{cursor:"pointer",fontSize:16}}))),i().createElement("div",{style:{overflowY:"auto",flex:1}},i().createElement("div",{style:s},i().createElement(Te,{ready:!l,showLoadingAnimation:!0,customPlaceholder:d},m))))}}])}(i().Component);Me=Oe(Me);const Le=require("lodash");function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ze.apply(null,arguments)}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t,r){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ae(n.key),n)}}function Ae(e){var t=function(e){if("object"!=Ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ne(t)?t:t+""}function qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qe=function(){return!!e})()}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}var Ge=l().requireLib("workspaces").MasterLayout,Je=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=He(t),function(e,t){if(t&&("object"==Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qe()?Reflect.construct(t,r||[],He(e).constructor):t.apply(e,r))}(this,t,[e])).state={unreadStatus:0,drawerOpen:!0},r.showTutorial()||(r.closeTimeout=setTimeout((function(){r.setState({drawerOpen:!1})}),2500)),r._resizeEventDebounced=(0,Le.debounce)((function(){window.dispatchEvent(new Event("resize")),r.setState({fullScreenTransition:!1})}),350),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(t,e),r=t,(n=[{key:"showTutorial",value:function(){var e=this.props.pydio,t=e.user&&e.user.getLayoutPreference("WelcomeComponent.Pydio8.TourGuide.Welcome",!1);return e.getPluginConfigs("gui.ajax").get("ENABLE_WELCOME_TOUR")&&!t}},{key:"openDrawer",value:function(e){e.stopPropagation(),this.clearCloseTimeout(),this.setState({drawerOpen:!0})}},{key:"clearCloseTimeout",value:function(){this.closeTimeout&&clearTimeout(this.closeTimeout)}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.pydio,o=r.muiTheme,a=this.state,l=a.drawerOpen,s=a.fullScreen,u=a.fullScreenTransition,d=new c.Color(o.appBar.color),f="mui3"===o.userTheme,m=o.palette.mui3,y=o.buildFSTemplate({});y.appBarStyle={backgroundColor:o.darkMode?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.40)",height:s?0:200,display:"flex",alignItems:"center",justifyContent:"center"},y.buttonsStyle={color:o.appBar.textColor},y.iconButtonsStyle={color:d.darken(.4).toString()},y.wsListsContainerStyle={flex:1,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:f?m.surface:"white",overflow:"hidden"},this.showTutorial()&&(e=i().createElement(T,{ref:"welcome",pydio:n,onFinish:function(){t.closeTimeout=setTimeout((function(){t.setState({drawerOpen:!1})}),1500)}}));var h={};"mui3"!==o.userTheme&&(h={position:"absolute",bottom:0,top:0,zIndex:1e3,transform:l?"translateX(0px)":"translateX(-250px)"});var b={style:We(We({},y.leftPanel.masterStyle),h),headerHeight:72,onMouseOver:function(){t.clearCloseTimeout()},userWidgetProps:{mergeButtonInAvatar:!0,popoverDirection:"left",actionBarStyle:{marginTop:0},style:{height:72,display:"flex",alignItems:"center",boxShadow:"none",background:"transparent"}}};return i().createElement(Ge,{pydio:n,classes:["vertical_fit","react-fs-template","user-dashboard-template"],style:We(We({},y.masterStyle),{},{backgroundColor:"transparent"}),tutorialComponent:e,leftPanelProps:b,drawerOpen:l,onCloseDrawerRequested:function(){void 0===e&&t.setState({drawerOpen:!1})}},i().createElement(c.Paper,{zDepth:0,style:We({},y.appBarStyle),rounded:!1},!f&&i().createElement("span",{className:"drawer-button",style:{position:"absolute",top:6,left:2,zIndex:2}},i().createElement(c.IconButton,{iconStyle:{color:null},iconClassName:"mdi mdi-menu",onClick:this.openDrawer.bind(this)})),i().createElement("div",{style:{width:250,display:"flex",justifyContent:"center"}},i().createElement(p,{className:"home-top-logo",style:{maxHeight:100},pydio:this.props.pydio,darkMode:o.darkMode,pluginName:"gui.ajax",pluginParameter:"CUSTOM_DASH_LOGO"}))),i().createElement(te,ze({zDepth:0},this.props,{style:y.wsListsContainerStyle,fullScreen:s,fullScreenTransition:u,onFocusChange:function(e){e!==t.state.fullScreen&&t.setState({fullScreen:e,fullScreenTransition:!0},t._resizeEventDebounced)}}),i().createElement(Me,ze({},this.props,{emptyStateProps:{style:{backgroundColor:"transparent"}}}))))}}])&&Fe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().Component);Je=(0,s.muiThemeable)()(Je),window.WelcomeComponents=n})();